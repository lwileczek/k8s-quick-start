--- 
# LXC Container profile for home made Kubernetes cluster
# Identifies Storage to use, Kernel modules to use, and limits the CPU & Memory
# Taken from: 
#   justmeandopensource 
#   https://github.com/justmeandopensource/kubernetes/blob/master/lxd-provisioning/k8s-profile-config
#
# Documentation: 
# You can read about using YAML files to create preseeded LXD profiles here:
#     https://linuxcontainers.org/lxd/docs/master/preseed
#
# Example:
#  cat <<EOF | lxd init --preseed
#  config:
#    core.https_address: 192.168.1.1:9999
#    images.auto_update_interval: 15
#  networks:
#  - name: lxdbr0
#    type: bridge
#    config:
#      ipv4.address: auto
#      ipv6.address: none
#  EOF
config:
  limits.cpu: "2"
  limits.memory: 2GB
  limits.memory.swap: "false"
  linux.kernel_modules: ip_tables,ip6_tables,netlink_diag,nf_nat,overlay
  raw.lxc: "lxc.apparmor.profile=unconfined\nlxc.cap.drop= \nlxc.cgroup.devices.allow=a\nlxc.mount.auto=proc:rw
    sys:rw"
  security.privileged: "true"
  security.nesting: "true"
description: LXD profile for Kubernetes
devices:
  eth0:
    name: eth0
    nictype: bridged
    parent: lxdbr0
    type: nic
  root:
    path: /
    pool: k8s-storage
    type: disk
name: k8s-node
used_by: []

